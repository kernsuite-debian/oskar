<?xml version="1.0" encoding="UTF-8"?>

<s k="beam_pattern"><label>Beam pattern settings</label>
    <desc>
        These settings are used only when running beam pattern simulations.
    </desc>
    <s k="all_stations"><label>All stations</label>
        <type name="bool" default="false"/>
        <desc>If set, produce beams for all stations in the telescope
            model; otherwise, for selected stations.</desc>
    </s>
    <s k="station_ids"><label>Station ID(s)</label>
        <depends k="beam_pattern/all_stations" v="false"/>
        <type name="IntList" default="0"/>
        <desc>The zero-based station ID number(s) to select from the
            telescope model when generating beam pattern(s). More than one
            station ID is specified using a CSV list.</desc>
    </s>
    <s k="coordinate_frame"><label>Coordinate frame</label>
        <type name="OptionList" default="Equatorial">Equatorial, Horizon</type>
        <desc>Specification of the coordinate frame in which to evaluate
            the beam pattern. Horizon-based beam patterns will cover the
            entire sky.</desc>
    </s>
    <s k="coordinate_type"><label>Coordinate (grid) type</label>
        <depends k="beam_pattern/coordinate_frame" v="Equatorial"/>
        <type name="OptionList" default="Beam image">
            Beam image, Sky model
        </type>
        <desc>
            Specification of coordinates at which to evaluate the beam pattern.
            <ul>
            <li><b>Beam image:</b> Tangent plane image, centred on the
                phase centre direction.</li>
            <li><b>Sky model:</b> Evaluate beam only at the supplied
                coordinates.</li>
            </ul>
        </desc>
    </s>
    <s k="beam_image"><label>Beam image</label>
        <desc>Image of the beam, centred on the phase centre.</desc>
        <depends k="beam_pattern/coordinate_type" v="Beam image"/>
        <s k="size" >
            <label>Image dimensions [pixels]</label>
            <type name="IntList" default="256"/>
            <desc>
                Image dimensions. If a single value is specified, the
                image is assumed to have the same number of pixels along each
                dimension.<br/>
                Example:
                <ul>
                <li>A value of '256' results in a square image of size 256 by
                    256 pixels.</li>
                <li>A value of '256,128' results in an image of 256 by 128
                    pixels, with 256 pixels along the Right Ascension
                    direction.</li>
                </ul>
            </desc>
        </s>
        <s k="fov_deg">
            <label>Field-of-view [deg]</label>
            <depends k="beam_pattern/coordinate_frame" v="Equatorial"/>
            <type name="DoubleList" default="2.0"/>
            <desc>
                Field-of-view (FOV) in degrees (max 180.0). If a single value
                is specified, the image is assumed to have the same FOV along
                each dimension.<br/>
                Example:
                <ul>
                <li>A value of '2.0' results in an image with a FOV of 2.0
                    degrees in each dimension.</li>
                <li>A value of '2.0,1.0' results in an image with a FOV of
                    2.0 degrees in Right Ascension, and 1.0 degrees in
                    Declination.</li>
                </ul>
            </desc>
        </s>
    </s>
    <s k="sky_model"><label>Sky model</label>
        <depends k="beam_pattern/coordinate_type" v="Sky model"/>
        <s k="file"><label>Input file</label>
            <type name="InputFile"/>
            <desc>Path to an input sky model file.</desc>
        </s>
    </s>
    <!-- PROPOSED NEW FEATURE
    <s k="healpix">
        <label>HEALPix settings</label>
        <depends k="beam_pattern/coordinate_type" v="HEALPix"/>
        <s k="nside"><label>Nside</label>
            <type name="uint" default="128"/>
            <desc>HEALPix Nside parameter. The total number of points is
                12 * Nside * Nside</desc>
        </s>
    </s>
    -->
    <!-- PROPOSED NEW FEATURE
    <s k="horizon_clip"><label>Horizon clip</label>
        <type name="bool" default="true"/>
        <desc>Zero the beam pattern below the horizon</desc>
    </s>
    -->
    <s k="root_path"><label>Output root path name</label>
        <type name="OutputFile"/>
        <desc>Root path name of the generated data file.
            Appropriate suffixes and extensions will be added to this,
            based on the settings below.</desc>
    </s>
    <s k="output"><label>Output options</label>
        <s k="separate_time_and_channel">
            <label>Separate time and channel</label>
            <type name="bool" default="true"/>
            <desc>Output files without performing any averaging over the
                time or channel dimensions.</desc>
        </s>
        <s k="average_time_and_channel">
            <label>Average time and channel</label>
            <type name="bool" default="false"/>
            <desc>Output files after averaging over both the
                time and channel dimensions.</desc>
        </s>
        <s k="average_single_axis">
            <label>Average single axis</label>
            <type name="OptionList" default="false">None, Time, Channel</type>
            <desc>Output files after averaging over the selected
                dimension.</desc>
        </s>
    </s>
    <s k="station_outputs"><label>Per-station outputs</label>
        <s k="text_file">
            <label>Text file</label>
            <s k="raw_complex"><label>Raw (complex) pattern</label>
                <depends k="beam_pattern/output/separate_time_and_channel"
                    v="true"/>
                <type name="bool" default="false"/>
                <desc>If true, save the raw complex pattern in text
                    files.</desc>
            </s>
            <s k="amp"><label>Amplitude pattern</label>
                <depends k="beam_pattern/output/separate_time_and_channel"
                    v="true"/>
                <type name="bool" default="false"/>
                <desc>If true, save each amplitude (voltage) pattern in text
                    files. This is given by the square root of the sum
                    of the squares of the real and imaginary values.</desc>
            </s>
            <s k="phase"><label>Phase pattern</label>
                <depends k="beam_pattern/output/separate_time_and_channel"
                    v="true"/>
                <type name="bool" default="false"/>
                <desc>If true, save each phase pattern in text files.</desc>
            </s>
            <s k="auto_power_stokes_i">
                <label>Auto-correlation Stokes I power pattern</label>
                <type name="bool" default="false"/>
                <desc>If true, save each total intensity beam in text
                    files. This is evaluated as the Stokes I response of the
                    auto-correlation.</desc>
            </s>
            <!-- <s k="ixr">
                <label>Intrinsic cross-polarisation ratio (IXR)</label>
                <depends k="telescope/pol_mode" v="Full"/>
                <depends k="beam_pattern/output/separate_time_and_channel"
                    v="true"/>
                <type name="bool" default="false"/>
                <desc>If true, save the IXR map of the beam in text
                    files (see Carozzi and Woan, 2011).</desc>
            </s> -->
        </s>
        <s k="fits_image">
            <label>FITS image</label>
            <depends k="beam_pattern/coordinate_type" v="Beam image"/>
            <s k="amp"><label>Amplitude pattern</label>
                <depends k="beam_pattern/output/separate_time_and_channel"
                    v="true"/>
                <type name="bool" default="false"/>
                <desc>If true, save each amplitude (voltage) pattern in FITS
                    image files. This is given by the square root of the sum
                    of the squares of the real and imaginary values.</desc>
            </s>
            <s k="phase"><label>Phase pattern</label>
                <depends k="beam_pattern/output/separate_time_and_channel"
                    v="true"/>
                <type name="bool" default="false"/>
                <desc>If true, save each phase pattern in FITS image
                    files.</desc>
            </s>
            <s k="auto_power_stokes_i">
                <label>Auto-correlation Stokes I power pattern</label>
                <type name="bool" default="false"/>
                <desc>If true, save each total intensity beam in FITS image
                    files. This is evaluated as the Stokes I response of the
                    auto-correlation.</desc>
            </s>
            <!-- <s k="ixr">
                <label>Intrinsic cross-polarisation ratio (IXR)</label>
                <depends k="telescope/pol_mode" v="Full"/>
                <depends k="beam_pattern/output/separate_time_and_channel"
                    v="true"/>
                <type name="bool" default="false"/>
                <desc>If true, save the IXR map of each beam in FITS
                    image files (see Carozzi and Woan, 2011).</desc>
            </s> -->
        </s>
    </s>
    <s k="telescope_outputs"><label>Telescope outputs</label>
        <s k="text_file">
            <label>Text file</label>
            <s k="cross_power_stokes_i_raw_complex">
                <label>Cross-correlation Stokes I raw power pattern</label>
                <type name="bool" default="false"/>
                <desc>If true, save the average cross-power beam raw
                    response to Stokes I from all specified stations as a text
                    file.</desc>
            </s>
            <s k="cross_power_stokes_i_amp">
                <label>Cross-correlation Stokes I amplitude power
                    pattern</label>
                <type name="bool" default="false"/>
                <desc>If true, save the average cross-power beam amplitude
                    response to Stokes I from all specified stations as text
                    files.</desc>
            </s>
            <s k="cross_power_stokes_i_phase">
                <label>Cross-correlation Stokes I phase power pattern</label>
                <type name="bool" default="false"/>
                <desc>If true, save the average cross-power beam phase
                    response to Stokes I from all specified stations as text
                    files.</desc>
            </s>
        </s>
        <s k="fits_image">
            <label>FITS image</label>
            <depends k="beam_pattern/coordinate_type" v="Beam image"/>
            <s k="cross_power_stokes_i_amp">
                <label>Cross-correlation Stokes I amplitude power 
                    pattern</label>
                <type name="bool" default="false"/>
                <desc>If true, save the average cross-power beam amplitude
                    response to Stokes I from all specified stations in FITS
                    image files.</desc>
            </s>
            <s k="cross_power_stokes_i_phase">
                <label>Cross-correlation Stokes I phase power pattern</label>
                <type name="bool" default="false"/>
                <desc>If true, save the average cross-power beam phase
                    response to Stokes I from all specified stations in FITS
                    image files.</desc>
            </s>
        </s>
    </s>
</s>
